generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model roles {
  role_id        String  @id @default(auto()) @map("_id") @db.ObjectId
  role_type String
  users     users[]
}

model users {
  user_id       String @id @default(auto()) @map("_id") @db.ObjectId
  name     String
  username String
  email    String
  address  String
  role     roles?  @relation(fields: [role_id], references: [role_id])
  role_id   String? @db.ObjectId
}

model categories {
  category_id            String        @id @default(auto()) @map("_id") @db.ObjectId
  category_name String
  sub_categories sub_category[]
}

model sub_category {
  subcat_id           String      @id @default(auto()) @map("_id") @db.ObjectId
  subcat_name  String
  category     categories @relation(fields: [category_id], references: [category_id])
  category_id   String     @db.ObjectId
  products     products[]
}

model suppliers {
  supplier_id           String       @id @default(auto()) @map("_id") @db.ObjectId
  supplier_name String
  sup_email    String       @unique
  sup_address  String
  priority     Int
  products     products[]
}

model products {
  product_id              String       @id @default(auto()) @map("_id") @db.ObjectId
  product_name    String
  product_price   Float
  threshold_amount Int
  product_qty     Int
  product_location String
  sub_category    sub_category? @relation(fields: [subcat_id], references: [subcat_id])
  subcat_id        String? @db.ObjectId
  supplier        suppliers? @relation(fields: [supplier_id], references: [supplier_id])
  supplier_id      String? @db.ObjectId
  orders         orders[]
  batches       batches[]
}

model orders {
  order_id           String   @id @default(auto()) @map("_id") @db.ObjectId
  quantity     Int
  date_of_order DateTime @default(now())
  status       String
  product      products @relation(fields: [product_id], references: [product_id])
  product_id    String @db.ObjectId
}

model batches {
  batch_id              String       @id @default(auto()) @map("_id") @db.ObjectId
  batch_name      String
  expiry_date     DateTime
  quantity_in_batch Int
  product         products @relation(fields: [product_id], references: [product_id])
  product_id       String @db.ObjectId
  unit           unit[]
}

model unit {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  batch       batches  @relation(fields: [batch_id], references: [batch_id])
  batch_id     String   @db.ObjectId
}
